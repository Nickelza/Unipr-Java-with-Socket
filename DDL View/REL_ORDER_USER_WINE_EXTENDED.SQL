CREATE VIEW REL_ORDER_USER_WINE_EXTENDED
(
    USER_ID,
	USER_NAME,
    USER_SURNAME,
    USER_EMAIL,
    USER_PASSWORD,
    USER_TYPE,
    ORDER_ID,
    ORDER_DATE,
    ORDER_DELIVERED,
    WINE_ID,
    WINE_NAME,
    WINE_YEAR,
    WINE_PRODUCER,
    WINE_TECHNOTES,
    VINEYARD_ID,
    VINEYARD_NAME
)
AS
SELECT 
    U.ID,
    U.NAME,
    U.SURNAME,
    U.EMAIL,
    U.PASSWORD,
    U.TYPE,
    OI.ID,
    OI.DATE,
    OI.DELIVERED,
    W.ID,
    W.NAME,
    W.YEAR,
    W.PRODUCER,
    W.TECHNOTES,
    VY.ID,
    VY.NAME
    FROM REL_ORDER_USER as r0
    JOIN USER as U ON r0.USER_ID = U.ID
    JOIN ORDER_ITEM as OI ON OI.ID = r0.ORDER_ID
    JOIN REL_ORDER_WINE as r1 ON r1.ORDER_ID = r0.ORDER_ID
    JOIN WINE AS W ON r1.WINE_ID = W.ID
    LEFT JOIN REL_WINE_VINEYARD as r2 ON r2.WINE_ID = W.ID
    LEFT JOIN VINEYARD as VY ON VY.ID = r2.VINEYARD_ID
